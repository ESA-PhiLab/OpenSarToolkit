dist: bionic
sudo: required
language: python
python:
  - '3.6'
before_install:
  - sudo add-apt-repository -y ppa:ubuntugis/ubuntugis-unstable
  - sudo apt-get -y update
  - sudo apt-get install -y gdal-bin python-tk libgdal-dev
  - pip install numpy cython
  - if [ $RASTERIO_VERSION == "latest" ]; then pip install rasterio --no-binary :all:; else pip install rasterio==$RASTERIO_VERSION --no-binary :all:; fi;
  - export CURL_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt
install:
  - pip install -e .[test]
script:
  - pytest -v --cov mapchete test/
after_success:
  - coveralls
env:
  matrix:
    - RASTERIO_VERSION="latest"
matrix:
  allow_failures:
    - env: RASTERIO_VERSION="latest"